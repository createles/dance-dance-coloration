<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dance Dance Colorution!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for a subtle breathing animation on the history tiles */
        .history-tile-animation {
            animation: breathe 1.5s ease-in-out;
        }

        @keyframes breathe {
            0% {
                transform: scale(0.95);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.05);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white font-sans flex flex-col items-center min-h-screen p-4 sm:p-6 md:p-8">

    <div class="w-full max-w-4xl text-center mb-6">
        <h1 class="text-3xl sm:text-4xl font-bold text-gray-100 mb-2"><img class="title-card" src="./2.svg" alt=""></h1>
        <p class="text-gray-400">きいた　いろ　の　たいる　を　おしてください！</p>
    </div>

    <!-- History/Clicked Patterns Area -->
    <div class="bg-gray-800 rounded-lg p-4 w-full max-w-4xl mb-6 shadow-lg min-h-[80px] sm:min-h-[100px]">
        <h2 class="text-lg font-semibold text-gray-300 mb-3">おした　たいる:</h2>
        <div id="history-container" class="flex flex-wrap gap-2 sm:gap-3">
            <!-- Clicked colors will appear here -->
        </div>
    </div>

    <!-- Color Palette/Tiles -->
    <div id="color-grid" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-3 sm:gap-4 w-full max-w-4xl mb-6">
        <!-- Color tiles will be generated by JavaScript -->
    </div>

    <!-- Control Buttons -->
    <div class="flex gap-4">
        <button id="clear-button" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-all duration-200 shadow-md">
            クリアーする
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const colorsData = [
                { name: 'Red', class: 'bg-red-500' },
                { name: 'Orange', class: 'bg-orange-500' },
                { name: 'Yellow', class: 'bg-yellow-400', iconColor: 'black' },
                { name: 'Light Green', class: 'bg-lime-400', iconColor: 'black' },
                { name: 'Green', class: 'bg-green-500' },
                { name: 'Light Blue', class: 'bg-sky-400', iconColor: 'black' },
                { name: 'Blue', class: 'bg-blue-600' },
                { name: 'Purple', class: 'bg-purple-600' },
                { name: 'Pink', class: 'bg-pink-400' },
                { name: 'White', class: 'bg-white', iconColor: 'black' },
                { name: 'Black', class: 'bg-black' },
                { name: 'Brown', class: 'bg-amber-800' },
                { name: 'Silver', class: 'bg-slate-300', iconColor: 'black' },
                { name: 'Gold', class: 'bg-amber-500' }
            ];

            const icons = [
                // 0: North
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19V5m0 0l-7 7m7-7l7 7" /></svg>',
                // 1: South
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 5v14m0 0l-7-7m7 7l7-7" /></svg>',
                // 2: East
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14m0 0l-7-7m7 7l-7 7" /></svg>',
                // 3: West
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 12H5m0 0l7-7m-7 7l7 7" /></svg>',
                // 4: Turn Left
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" /></svg>',
                // 5: Turn Right
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 15l6-6m0 0l-6-6m6 6H9a6 6 0 000 12h3" /></svg>',
                // 6: Jump
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19V5m0 0l-7 7m7-7l7 7" /><path stroke-linecap="round" stroke-linejoin="round" d="M5 21h14" /></svg>',
                // 7: Crouch
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 5v14m0 0l-7-7m7 7l7-7" /><path stroke-linecap="round" stroke-linejoin="round" d="M5 3h14" /></svg>',
                // 8: Hands Up
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4a2 2 0 100 4 2 2 0 000-4z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4" /><path stroke-linecap="round" stroke-linejoin="round" d="M8 12l-4-4" /><path stroke-linecap="round" stroke-linejoin="round" d="M16 12l4-4" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 12l-2 8h4l-2-8z" /></svg>',
                // 9: Hands Down
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4a2 2 0 100 4 2 2 0 000-4z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4" /><path stroke-linecap="round" stroke-linejoin="round" d="M8 12l-4 4" /><path stroke-linecap="round" stroke-linejoin="round" d="M16 12l4 4" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 12l-2 8h4l-2-8z" /></svg>',
                // 10: Slide Left
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 19l-7-7 7-7m8 14l-7-7 7-7" /></svg>',
                // 11: Slide Right
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 5l7 7-7 7M5 5l7 7-7 7" /></svg>',
                // 12: Slide Forward
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 11l7-7 7 7M5 19l7-7 7 7" /></svg>',
                // 13: Slide Back
                '<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 sm:h-12 sm:w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 13l-7 7-7-7M19 5l-7 7-7-7" /></svg>',
            ];

            const colors = colorsData.map((color, index) => ({
                ...color,
                icon: icons[index] || ''
            }));

            const colorGrid = document.getElementById('color-grid');
            const historyContainer = document.getElementById('history-container');
            const clearButton = document.getElementById('clear-button');

            const addColorToHistory = (colorClass, colorName, iconHTML, iconColor) => {
                const historyTile = document.createElement('div');
                // Add flexbox classes to center the icon
                historyTile.className = `w-10 h-10 sm:w-12 sm:h-12 rounded-md shadow-inner border-2 border-gray-900/20 history-tile-animation flex items-center justify-center ${colorClass}`;
                historyTile.setAttribute('aria-label', colorName);

                if (iconHTML) {
                    // The SVG strings from the `icons` array have sizing classes. We'll make them smaller for the history view.
                    const historyIconHTML = iconHTML.replace('h-10 w-10 sm:h-12 sm:w-12', 'h-6 w-6 sm:h-7 sm:w-7');
                    const finalIconColor = iconColor || 'white';
                    historyTile.innerHTML = historyIconHTML.replace('stroke="currentColor"', `stroke="${finalIconColor}"`);
                }

                historyContainer.appendChild(historyTile);
            };

            colors.forEach(color => {
                const tile = document.createElement('button');
                tile.className = `h-20 sm:h-24 rounded-lg shadow-md transform hover:scale-105 transition-transform duration-200 focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-cyan-500 flex items-center justify-center ${color.class}`;
                tile.setAttribute('aria-label', `Select ${color.name}`);
                
                if (color.icon) {
                    const iconColor = color.iconColor || 'white';
                    tile.innerHTML = color.icon.replace('stroke="currentColor"', `stroke="${iconColor}"`);
                }

                tile.addEventListener('click', () => {
                    // Pass icon information to the history function
                    addColorToHistory(color.class, color.name, color.icon, color.iconColor);
                });
                colorGrid.appendChild(tile);
            });
            
            clearButton.addEventListener('click', () => {
                historyContainer.innerHTML = '';
            });
        });
    </script>

</body>
</html>

